{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/utils/chatStorage.ts"],"sourcesContent":["import { ChatSession } from \"@/types/ChatTypes\";\r\n\r\nexport const CHAT_STORAGE_KEY = \"chatSessions\";\r\n\r\nexport function saveChatSessions(sessions: ChatSession[]) {\r\n  localStorage.setItem(CHAT_STORAGE_KEY, JSON.stringify(sessions));\r\n}\r\n\r\nexport function loadChatSessions(): ChatSession[] {\r\n  if (typeof window === \"undefined\") return [];\r\n  const stored = localStorage.getItem(CHAT_STORAGE_KEY);\r\n  return stored ? JSON.parse(stored) : [];\r\n}\r\n\r\nexport function renameChatSession(id: string, newTitle: string) {\r\n  const sessions = loadChatSessions();\r\n  const updated = sessions.map((s) =>\r\n    s.id === id ? { ...s, title: newTitle } : s\r\n  );\r\n  saveChatSessions(updated);\r\n}\r\n\r\nexport function deleteChatSession(id: string) {\r\n  const sessions = loadChatSessions();\r\n  const filtered = sessions.filter((s) => s.id !== id);\r\n  saveChatSessions(filtered);\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEO,MAAM,mBAAmB;AAEzB,SAAS,iBAAiB,QAAuB;IACtD,aAAa,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC;AACxD;AAEO,SAAS;IACd,wCAAmC,OAAO,EAAE;;IAC5C,MAAM;AAER;AAEO,SAAS,kBAAkB,EAAU,EAAE,QAAgB;IAC5D,MAAM,WAAW;IACjB,MAAM,UAAU,SAAS,GAAG,CAAC,CAAC,IAC5B,EAAE,EAAE,KAAK,KAAK;YAAE,GAAG,CAAC;YAAE,OAAO;QAAS,IAAI;IAE5C,iBAAiB;AACnB;AAEO,SAAS,kBAAkB,EAAU;IAC1C,MAAM,WAAW;IACjB,MAAM,WAAW,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACjD,iBAAiB;AACnB","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/app/components/ui/Toast.tsx"],"sourcesContent":["// File: src/app/components/ui/Toast.tsx\r\n\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\n\r\ninterface ToastProps {\r\n  message: string;\r\n  show: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function Toast({ message, show, onClose }: ToastProps) {\r\n  useEffect(() => {\r\n    if (show) {\r\n      const timer = setTimeout(() => onClose(), 3000); // Auto close after 3s\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [show, onClose]);\r\n\r\n  return (\r\n    <div\r\n      className={`fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-zinc-800 text-white text-sm px-4 py-2 rounded shadow-md transition-opacity duration-300 z-50 ${\r\n        show ? \"opacity-100\" : \"opacity-0 pointer-events-none\"\r\n      }`}\r\n    >\r\n      {message}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;AAGxC;AAFA;;;AAUe,SAAS,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAc;IAClE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,MAAM;YACR,MAAM,QAAQ,WAAW,IAAM,WAAW,OAAO,sBAAsB;YACvE,OAAO,IAAM,aAAa;QAC5B;IACF,GAAG;QAAC;QAAM;KAAQ;IAElB,qBACE,8OAAC;QACC,WAAW,CAAC,mJAAmJ,EAC7J,OAAO,gBAAgB,iCACvB;kBAED;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/app/components/SavedChatsSidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { ChatSession } from \"@/types/ChatTypes\";\r\nimport {\r\n  loadChatSessions,\r\n  // saveChatSessions,\r\n  deleteChatSession,\r\n  renameChatSession,\r\n} from \"@/utils/chatStorage\";\r\nimport { MoreHorizontal } from \"lucide-react\";\r\nimport Toast from \"./ui/Toast\";\r\n\r\ninterface SavedChatsSidebarProps {\r\n  onSelect: (session: ChatSession) => void;\r\n  sessions: ChatSession[];\r\n  setSessions: React.Dispatch<React.SetStateAction<ChatSession[]>>;\r\n  activeId: string | null;\r\n}\r\n\r\nexport default function SavedChatsSidebar({\r\n  onSelect,\r\n  sessions,\r\n  setSessions,\r\n  activeId,\r\n}: SavedChatsSidebarProps) {\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [editTitle, setEditTitle] = useState<string>(\"\");\r\n  const [dropdownOpenId, setDropdownOpenId] = useState<string | null>(null);\r\n  const [toastMsg, setToastMsg] = useState(\"\");\r\n  const [showToast, setShowToast] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setSessions(loadChatSessions());\r\n  }, [setSessions]);\r\n\r\n  const triggerToast = (msg: string) => {\r\n    setToastMsg(msg);\r\n    setShowToast(true);\r\n  };\r\n\r\n  const handleRename = (id: string) => {\r\n    const updated = sessions.map((s) =>\r\n      s.id === id ? { ...s, title: editTitle } : s\r\n    );\r\n    setSessions(updated);\r\n    renameChatSession(id, editTitle);\r\n    setEditingId(null);\r\n    triggerToast(\"Title updated\");\r\n  };\r\n\r\n  const handleDelete = (id: string) => {\r\n    const updated = sessions.filter((s) => s.id !== id);\r\n    setSessions(updated);\r\n    deleteChatSession(id);\r\n    triggerToast(\"Chat deleted\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"my-6\">\r\n      <h4 className=\"text-xs text-zinc-400 uppercase tracking-wide mb-2\">\r\n        Conversations\r\n      </h4>\r\n      <ul className=\"space-y-2\">\r\n        {sessions.map((session) => (\r\n          <li\r\n            key={session.id}\r\n            className={`relative p-3 rounded-md transition group cursor-pointer ${\r\n              activeId === session.id\r\n                ? \"bg-zinc-700 text-white\"\r\n                : \"hover:bg-zinc-700 text-zinc-300\"\r\n            }`}\r\n            onClick={() => onSelect(session)}\r\n          >\r\n            {editingId === session.id ? (\r\n              <input\r\n                type=\"text\"\r\n                className=\"w-full bg-transparent border-b border-white focus:outline-none\"\r\n                value={editTitle}\r\n                onChange={(e) => setEditTitle(e.target.value)}\r\n                onBlur={() => handleRename(session.id)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === \"Enter\") handleRename(session.id);\r\n                  if (e.key === \"Escape\") {\r\n                    setEditingId(null);\r\n                    setDropdownOpenId(null); // âœ… Also hide dropdown just in case\r\n                  }\r\n                }}\r\n                autoFocus\r\n              />\r\n            ) : (\r\n              <>\r\n                <div className=\"font-medium text-md truncate pr-6\">{session.title}</div>\r\n                <div className=\"text-xs mt-1\">\r\n                  {new Date(session.createdAt).toLocaleDateString(\"en-US\", {\r\n                    year: \"numeric\",\r\n                    month: \"short\",\r\n                    day: \"numeric\",\r\n                  })}\r\n                </div>\r\n              </>\r\n            )}\r\n            <div\r\n              className=\"absolute top-2 right-2\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                setDropdownOpenId((prev) =>\r\n                  prev === session.id ? null : session.id\r\n                );\r\n              }}\r\n            >\r\n              <MoreHorizontal size={18} className=\"text-zinc-400 hover:text-white\" />\r\n              {dropdownOpenId === session.id && (\r\n                <div className=\"absolute right-0 mt-1 w-32 bg-zinc-900 border border-zinc-700 rounded shadow-lg z-50\">\r\n                  <button\r\n                    className=\"block w-full text-left px-3 py-2 text-sm hover:bg-zinc-800\"\r\n                    onClick={() => {\r\n                      setEditTitle(session.title);\r\n                      setEditingId(session.id);\r\n                      setTimeout(() => setDropdownOpenId(null), 0);\r\n                    }}\r\n                  >\r\n                    Rename\r\n                  </button>\r\n                  <button\r\n                    className=\"block w-full text-left px-3 py-2 text-sm hover:bg-red-800 text-red-400\"\r\n                    onClick={() => {\r\n                      handleDelete(session.id);\r\n                      setDropdownOpenId(null);\r\n                    }}\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <Toast\r\n        message={toastMsg}\r\n        show={showToast}\r\n        onClose={() => setShowToast(false)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAMA;AACA;AAXA;;;;;;AAoBe,SAAS,kBAAkB,EACxC,QAAQ,EACR,QAAQ,EACR,WAAW,EACX,QAAQ,EACe;IACvB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACpE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,YAAY,CAAA,GAAA,2HAAA,CAAA,mBAAgB,AAAD;IAC7B,GAAG;QAAC;KAAY;IAEhB,MAAM,eAAe,CAAC;QACpB,YAAY;QACZ,aAAa;IACf;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,UAAU,SAAS,GAAG,CAAC,CAAC,IAC5B,EAAE,EAAE,KAAK,KAAK;gBAAE,GAAG,CAAC;gBAAE,OAAO;YAAU,IAAI;QAE7C,YAAY;QACZ,CAAA,GAAA,2HAAA,CAAA,oBAAiB,AAAD,EAAE,IAAI;QACtB,aAAa;QACb,aAAa;IACf;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,UAAU,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QAChD,YAAY;QACZ,CAAA,GAAA,2HAAA,CAAA,oBAAiB,AAAD,EAAE;QAClB,aAAa;IACf;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAqD;;;;;;0BAGnE,8OAAC;gBAAG,WAAU;0BACX,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC;wBAEC,WAAW,CAAC,wDAAwD,EAClE,aAAa,QAAQ,EAAE,GACnB,2BACA,mCACJ;wBACF,SAAS,IAAM,SAAS;;4BAEvB,cAAc,QAAQ,EAAE,iBACvB,8OAAC;gCACC,MAAK;gCACL,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;gCAC5C,QAAQ,IAAM,aAAa,QAAQ,EAAE;gCACrC,WAAW,CAAC;oCACV,IAAI,EAAE,GAAG,KAAK,SAAS,aAAa,QAAQ,EAAE;oCAC9C,IAAI,EAAE,GAAG,KAAK,UAAU;wCACtB,aAAa;wCACb,kBAAkB,OAAO,oCAAoC;oCAC/D;gCACF;gCACA,SAAS;;;;;qDAGX;;kDACE,8OAAC;wCAAI,WAAU;kDAAqC,QAAQ,KAAK;;;;;;kDACjE,8OAAC;wCAAI,WAAU;kDACZ,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB,CAAC,SAAS;4CACvD,MAAM;4CACN,OAAO;4CACP,KAAK;wCACP;;;;;;;;0CAIN,8OAAC;gCACC,WAAU;gCACV,SAAS,CAAC;oCACR,EAAE,eAAe;oCACjB,kBAAkB,CAAC,OACjB,SAAS,QAAQ,EAAE,GAAG,OAAO,QAAQ,EAAE;gCAE3C;;kDAEA,8OAAC,gNAAA,CAAA,iBAAc;wCAAC,MAAM;wCAAI,WAAU;;;;;;oCACnC,mBAAmB,QAAQ,EAAE,kBAC5B,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,WAAU;gDACV,SAAS;oDACP,aAAa,QAAQ,KAAK;oDAC1B,aAAa,QAAQ,EAAE;oDACvB,WAAW,IAAM,kBAAkB,OAAO;gDAC5C;0DACD;;;;;;0DAGD,8OAAC;gDACC,WAAU;gDACV,SAAS;oDACP,aAAa,QAAQ,EAAE;oDACvB,kBAAkB;gDACpB;0DACD;;;;;;;;;;;;;;;;;;;uBAhEF,QAAQ,EAAE;;;;;;;;;;0BAyErB,8OAAC,wIAAA,CAAA,UAAK;gBACJ,SAAS;gBACT,MAAM;gBACN,SAAS,IAAM,aAAa;;;;;;;;;;;;AAIpC","debugId":null}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/app/components/SidebarNavigation.tsx"],"sourcesContent":["// File: src/app/components/SidebarNavigation.tsx\r\n\r\n\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Home, Bookmark, FileText, Bell, Plus } from \"lucide-react\";\r\n\r\nexport default function SidebarNavigation({\r\n  onNewChat,\r\n}: {\r\n  onNewChat: () => void;\r\n}) {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Top Nav Items */}\r\n      <nav className=\"text-sm flex flex-col gap-2\">\r\n        <button\r\n          onClick={() => router.push(\"/\")}\r\n          className=\"flex items-center gap-3 px-2 py-2 rounded-md cursor-pointer hover:bg-zinc-800 text-zinc-300 hover:text-white transition\"\r\n        >\r\n          <Home size={18} /> Home\r\n        </button>\r\n        <button\r\n          className=\"flex items-center gap-3 px-2 py-2 rounded-md cursor-pointer hover:bg-zinc-800 text-zinc-300 hover:text-white transition\"\r\n        >\r\n          <Bookmark size={18} /> Bookmarks\r\n        </button>\r\n        <button\r\n          className=\"flex items-center gap-3 px-2 py-2 rounded-md cursor-pointer hover:bg-zinc-800 text-zinc-300 hover:text-white transition\"\r\n        >\r\n          <FileText size={18} /> Drafts & Templates\r\n        </button>\r\n        <button\r\n          className=\"flex items-center gap-3 px-2 py-2 rounded-md cursor-pointer hover:bg-zinc-800 text-zinc-300 hover:text-white transition\"\r\n        >\r\n          <Bell size={18} /> Alerts\r\n        </button>\r\n      </nav>\r\n\r\n      {/* New Chat Button */}\r\n      <button\r\n        onClick={onNewChat}\r\n        className=\"w-full mt-4 flex items-center justify-center gap-2 px-3 py-2 bg-zinc-800 cursor-pointer hover:bg-zinc-700 text-white text-sm rounded-md transition\"\r\n      >\r\n        <Plus size={16} /> New Chat\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,iDAAiD;;;;;AAIjD;AACA;AAAA;AAAA;AAAA;AAAA;AAHA;;;;AAKe,SAAS,kBAAkB,EACxC,SAAS,EAGV;IACC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS,IAAM,OAAO,IAAI,CAAC;wBAC3B,WAAU;;0CAEV,8OAAC,mMAAA,CAAA,OAAI;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAEpB,8OAAC;wBACC,WAAU;;0CAEV,8OAAC,0MAAA,CAAA,WAAQ;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAExB,8OAAC;wBACC,WAAU;;0CAEV,8OAAC,8MAAA,CAAA,WAAQ;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAExB,8OAAC;wBACC,WAAU;;0CAEV,8OAAC,kMAAA,CAAA,OAAI;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;0BAKtB,8OAAC;gBACC,SAAS;gBACT,WAAU;;kCAEV,8OAAC,kMAAA,CAAA,OAAI;wBAAC,MAAM;;;;;;oBAAM;;;;;;;;;;;;;AAI1B","debugId":null}},
    {"offset": {"line": 421, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/app/components/ChatSidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { FC } from \"react\";\r\nimport SavedChatsSidebar from \"./SavedChatsSidebar\";\r\nimport { ChatSession } from \"@/types/ChatTypes\";\r\nimport SidebarNavigation from \"./SidebarNavigation\";\r\nimport NewChatConfirmModal from \"./NewChatConfirmModal\";\r\ninterface ChatSidebarProps {\r\n  sidebarOpen: boolean;\r\n  setSidebarOpen: React.Dispatch<React.SetStateAction<boolean>>;\r\n  onSelectSession: (session: ChatSession) => void;\r\n  sessions: ChatSession[];\r\n  activeId: string | null;\r\n  setSessions: React.Dispatch<React.SetStateAction<ChatSession[]>>;\r\n}\r\n\r\nconst ChatSidebar: FC<ChatSidebarProps> = ({\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n  onSelectSession,\r\n  sessions,\r\n  activeId,\r\n  setSessions,\r\n}) => {\r\n  const handleClose = () => setSidebarOpen(false);\r\n  const [confirmNewChatOpen, setConfirmNewChatOpen] = useState(false);\r\n  return (\r\n    <>\r\n      <aside\r\n        className={`fixed md:static z-30 top-0 left-0 h-full w-64 bg-zinc-950 border-r border-zinc-800 p-4 transform transition-transform duration-200 ease-in-out ${\r\n          sidebarOpen ? \"translate-x-0\" : \"-translate-x-full md:translate-x-0\"\r\n        }`}\r\n      >\r\n        <h2 className=\"text-lg font-semibold mb-4\">Cyberlegal.AI</h2>\r\n        <SidebarNavigation onNewChat={() => {\r\n          // Clear sessions and reset UI\r\n          setSessions((prev) => [\r\n            {\r\n              id: crypto.randomUUID(),\r\n              title: \"New Chat\",\r\n              createdAt: new Date().toISOString(),\r\n              messages: [],\r\n            },\r\n            ...prev,\r\n          ]);\r\n        }} />\r\n\r\n        {/* âœ… Forward session props to SavedChatsSidebar */}\r\n        <SavedChatsSidebar\r\n          onSelect={(session) => {\r\n            onSelectSession(session);\r\n            setSidebarOpen(false);\r\n          }}\r\n          sessions={sessions}\r\n          activeId={activeId}\r\n          setSessions={setSessions}\r\n        />\r\n\r\n        <div className=\"mt-auto pt-4 border-t border-zinc-800 text-xs text-zinc-600\">\r\n          Â© 2025 Cyberlegal.AI\r\n        </div>\r\n      </aside>\r\n\r\n      {sidebarOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black bg-opacity-40 z-20 md:hidden\"\r\n          onClick={handleClose}\r\n        ></div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChatSidebar;\r\n"],"names":[],"mappings":";;;;AAGA;AAEA;AALA;;;;AAgBA,MAAM,cAAoC,CAAC,EACzC,WAAW,EACX,cAAc,EACd,eAAe,EACf,QAAQ,EACR,QAAQ,EACR,WAAW,EACZ;IACC,MAAM,cAAc,IAAM,eAAe;IACzC,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,SAAS;IAC7D,qBACE;;0BACE,8OAAC;gBACC,WAAW,CAAC,+IAA+I,EACzJ,cAAc,kBAAkB,sCAChC;;kCAEF,8OAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,8OAAC,8IAAA,CAAA,UAAiB;wBAAC,WAAW;4BAC5B,8BAA8B;4BAC9B,YAAY,CAAC,OAAS;oCACpB;wCACE,IAAI,OAAO,UAAU;wCACrB,OAAO;wCACP,WAAW,IAAI,OAAO,WAAW;wCACjC,UAAU,EAAE;oCACd;uCACG;iCACJ;wBACH;;;;;;kCAGA,8OAAC,8IAAA,CAAA,UAAiB;wBAChB,UAAU,CAAC;4BACT,gBAAgB;4BAChB,eAAe;wBACjB;wBACA,UAAU;wBACV,UAAU;wBACV,aAAa;;;;;;kCAGf,8OAAC;wBAAI,WAAU;kCAA8D;;;;;;;;;;;;YAK9E,6BACC,8OAAC;gBACC,WAAU;gBACV,SAAS;;;;;;;;AAKnB;uCAEe","debugId":null}},
    {"offset": {"line": 510, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/app/components/ChatEmptyState.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRef, useEffect } from \"react\";\r\nimport { FC, useState } from \"react\";\r\nimport { PaperAirplaneIcon } from \"@heroicons/react/24/solid\";  \r\n\r\ninterface ChatEmptyStateProps {\r\n  onPresetClick: (text: string) => void;\r\n  input: string;\r\n  onInputChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  onSend: (e: React.FormEvent) => void;\r\n}\r\n\r\nconst rolePrompts: Record<string, string[]> = {\r\n  Prosecutor: [\r\n    \"What constitutes cyber libel under PH law?\",\r\n    \"What case laws support evidence admissibility?\",\r\n    \"How to file a complaint against online fraud?\"\r\n  ],\r\n  Defendant: [\r\n    \"What are defenses against cyber libel?\",\r\n    \"How to challenge digital evidence in court?\",\r\n    \"Can I be held liable for private messages leaked?\"\r\n  ],\r\n  Judge: [\r\n    \"Summarize key rulings on RA 10175.\",\r\n    \"What is jurisprudence on online entrapment?\",\r\n    \"Guide to issuing search warrants on cloud data\"\r\n  ],\r\n};\r\n\r\nconst ChatEmptyState: FC<ChatEmptyStateProps> = ({\r\n  onPresetClick,\r\n  input,\r\n  onInputChange,\r\n  onSend,\r\n}) => {\r\n  const [selectedRole, setSelectedRole] =\r\n    useState<keyof typeof rolePrompts>(\"Prosecutor\");\r\n  const [selectedTone, setSelectedTone] = useState(\"Professional\");\r\n  const [activePrompt, setActivePrompt] = useState<string | null>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    inputRef.current?.focus();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-[70vh] text-center transition-opacity duration-500 px-4\">\r\n        <h2 className=\"text-xl font-semibold p-6\">What legal question do you have in mind?</h2>\r\n      <div className=\"bg-zinc-900 border border-zinc-700 rounded-lg shadow-md w-full max-w-2xl px-6 py-6 space-y-6\">\r\n\r\n        {/* Role + Tone Dropdowns */}\r\n        <div className=\"flex justify-start gap-4 text-xs text-zinc-300\">\r\n          <div className=\"flex items-center gap-1\">\r\n            <span className=\"text-zinc-400\">AI Role:</span>\r\n            <select\r\n              value={selectedRole}\r\n              onChange={(e) =>\r\n                setSelectedRole(e.target.value as keyof typeof rolePrompts)\r\n              }\r\n              className=\"bg-zinc-800 border border-zinc-700 px-2 py-1 rounded-md text-white cursor-pointer\"\r\n            >\r\n              <option>Prosecutor</option>\r\n              <option>Defendant</option>\r\n              <option>Judge</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <span className=\"text-zinc-400\">AI Tone:</span>\r\n            <select\r\n              value={selectedTone}\r\n              onChange={(e) => setSelectedTone(e.target.value)}\r\n              className=\"bg-zinc-800 border border-zinc-700 px-2 py-1 rounded-md text-white cursor-pointer\"\r\n            >\r\n              <option>Professional</option>\r\n              <option>Casual</option>\r\n              <option>Neutral</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Input field */}\r\n        <form\r\n      onSubmit={onSend}\r\n      className=\"relative flex items-center w-full\"\r\n    >\r\n      <input\r\n        ref={inputRef}\r\n        value={input}\r\n        onChange={onInputChange}\r\n        type=\"text\"\r\n        placeholder=\"Tell me about the case...\"\r\n        className=\"w-full pr-12 pl-4 py-2 rounded-md bg-zinc-800 border border-zinc-700 text-white placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n      />\r\n      <button\r\n        type=\"submit\"\r\n        className=\"absolute right-2 top-1/2 -translate-y-1/2 text-indigo-400 hover:text-indigo-600 transition cursor-pointer\"\r\n        aria-label=\"Send\"\r\n      >\r\n        <PaperAirplaneIcon className=\"w-5 h-5 rotate-320\" />\r\n      </button>\r\n    </form>\r\n      </div>\r\n\r\n      {/* Role Tabs */}\r\n      <div className=\"mt-8 text-sm text-zinc-400\">\r\n        <p className=\"mb-2\">Here are some prompts to help you begin:</p>\r\n        <div className=\"flex justify-center gap-2 mb-4\">\r\n          {([\"Prosecutor\", \"Defendant\", \"Judge\"] as const).map((role) => (\r\n            <button\r\n              key={role}\r\n              onClick={() => setSelectedRole(role)}\r\n              className={`px-4 py-2 rounded-md border text-sm cursor-pointer ${\r\n                selectedRole === role\r\n                  ? \"bg-indigo-600 text-white border-indigo-600\"\r\n                  : \"border-zinc-700 text-zinc-300 hover:bg-zinc-800\"\r\n              }`}\r\n            >\r\n              As a {role}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Prompt Suggestions */}\r\n        <div className=\"flex flex-wrap justify-center gap-2 max-w-2xl mx-auto\">\r\n          {rolePrompts[selectedRole].map((prompt, idx) => {\r\n            const isActive = activePrompt === prompt;\r\n\r\n            return (\r\n              <button\r\n                key={idx}\r\n                onClick={() => {\r\n                  onPresetClick(prompt);\r\n                  setActivePrompt(prompt);\r\n                }}\r\n                className={`px-4 py-2 rounded-full text-sm border transition whitespace-nowrap cursor-pointer\r\n                  ${\r\n                    isActive\r\n                      ? \"bg-indigo-600 text-white border-indigo-600\"\r\n                      : \"bg-zinc-800 text-zinc-300 border-zinc-700 hover:bg-indigo-500 hover:text-white\"\r\n                  }`}\r\n              >\r\n                {prompt}\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatEmptyState;\r\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAJA;;;;;AAaA,MAAM,cAAwC;IAC5C,YAAY;QACV;QACA;QACA;KACD;IACD,WAAW;QACT;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;AACH;AAEA,MAAM,iBAA0C,CAAC,EAC/C,aAAa,EACb,KAAK,EACL,aAAa,EACb,MAAM,EACP;IACC,MAAM,CAAC,cAAc,gBAAgB,GACnC,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA4B;IACrC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAChE,MAAM,WAAW,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAoB;IAE1C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,SAAS,OAAO,EAAE;IACpB,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAA4B;;;;;;0BAC5C,8OAAC;gBAAI,WAAU;;kCAGb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDAAgB;;;;;;kDAChC,8OAAC;wCACC,OAAO;wCACP,UAAU,CAAC,IACT,gBAAgB,EAAE,MAAM,CAAC,KAAK;wCAEhC,WAAU;;0DAEV,8OAAC;0DAAO;;;;;;0DACR,8OAAC;0DAAO;;;;;;0DACR,8OAAC;0DAAO;;;;;;;;;;;;;;;;;;0CAGZ,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDAAgB;;;;;;kDAChC,8OAAC;wCACC,OAAO;wCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;wCAC/C,WAAU;;0DAEV,8OAAC;0DAAO;;;;;;0DACR,8OAAC;0DAAO;;;;;;0DACR,8OAAC;0DAAO;;;;;;;;;;;;;;;;;;;;;;;;kCAMd,8OAAC;wBACH,UAAU;wBACV,WAAU;;0CAEV,8OAAC;gCACC,KAAK;gCACL,OAAO;gCACP,UAAU;gCACV,MAAK;gCACL,aAAY;gCACZ,WAAU;;;;;;0CAEZ,8OAAC;gCACC,MAAK;gCACL,WAAU;gCACV,cAAW;0CAEX,cAAA,8OAAC,+NAAA,CAAA,oBAAiB;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAM/B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAO;;;;;;kCACpB,8OAAC;wBAAI,WAAU;kCACZ,AAAC;4BAAC;4BAAc;4BAAa;yBAAQ,CAAW,GAAG,CAAC,CAAC,qBACpD,8OAAC;gCAEC,SAAS,IAAM,gBAAgB;gCAC/B,WAAW,CAAC,mDAAmD,EAC7D,iBAAiB,OACb,+CACA,mDACJ;;oCACH;oCACO;;+BARD;;;;;;;;;;kCAcX,8OAAC;wBAAI,WAAU;kCACZ,WAAW,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,QAAQ;4BACtC,MAAM,WAAW,iBAAiB;4BAElC,qBACE,8OAAC;gCAEC,SAAS;oCACP,cAAc;oCACd,gBAAgB;gCAClB;gCACA,WAAW,CAAC;kBACV,EACE,WACI,+CACA,kFACJ;0CAEH;+BAZI;;;;;wBAeX;;;;;;;;;;;;;;;;;;AAKV;uCAEe","debugId":null}},
    {"offset": {"line": 788, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/app/components/ChatInput.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\n\r\ninterface ChatInputProps {\r\n  input: string;\r\n  onInputChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  onSend: (e: React.FormEvent) => void;\r\n}\r\n\r\nexport default function ChatInput({\r\n  input,\r\n  onInputChange,\r\n  onSend,\r\n}: ChatInputProps) {\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  useEffect(() => {\r\n    if (inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <form\r\n      onSubmit={onSend}\r\n      className=\"w-full border-t border-zinc-800 bg-zinc-900 p-4\"\r\n    >\r\n      <div className=\"max-w-3xl mx-auto flex items-center gap-2\">\r\n        <input\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={onInputChange}\r\n          placeholder=\"Ask about cyber libel, privacy law...\"\r\n          className=\"flex-1 px-4 py-2 rounded-md bg-zinc-800 border border-zinc-700 text-white placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          className=\"px-5 py-2 rounded-md bg-indigo-600 hover:bg-indigo-700 text-white text-sm transition-all cursor-pointer\"\r\n        >\r\n          Send\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAUe,SAAS,UAAU,EAChC,KAAK,EACL,aAAa,EACb,MAAM,EACS;IAEf,MAAM,WAAW,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAoB;IAC1C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,SAAS,OAAO,EAAE;YACpB,SAAS,OAAO,CAAC,KAAK;QACxB;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QACC,UAAU;QACV,WAAU;kBAEV,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBACC,KAAK;oBACL,MAAK;oBACL,OAAO;oBACP,UAAU;oBACV,aAAY;oBACZ,WAAU;;;;;;8BAEZ,8OAAC;oBACC,MAAK;oBACL,WAAU;8BACX;;;;;;;;;;;;;;;;;AAMT","debugId":null}},
    {"offset": {"line": 848, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/lib/auth.js"],"sourcesContent":["'use client';\r\nimport Cookies from 'js-cookie';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport const logout = () => {\r\n  Cookies.remove('cyberlegal-auth');\r\n  sessionStorage.clear();\r\n  toast.success('Logged out successfully');\r\n  setTimeout(() => {\r\n    window.location.href = '/login';\r\n  }, 1000);\r\n};\r\n"],"names":[],"mappings":";;;AACA;AACA;AAFA;;;AAIO,MAAM,SAAS;IACpB,qJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;IACf,eAAe,KAAK;IACpB,uJAAA,CAAA,UAAK,CAAC,OAAO,CAAC;IACd,WAAW;QACT,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB,GAAG;AACL","debugId":null}},
    {"offset": {"line": 870, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/app/components/ChatHeader.tsx"],"sourcesContent":["\"use client\";\r\n\r\n/*\r\n  Component: ChatHeader\r\n  Description: Displays the top navbar of the chatbot including the mobile menu and logout.\r\n*/\r\n\r\nimport { FC } from \"react\";\r\nimport { Menu } from \"lucide-react\";\r\nimport { logout } from \"@/lib/auth\";\r\n\r\ninterface ChatHeaderProps {\r\n  setSidebarOpen: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst ChatHeader: FC<ChatHeaderProps> = ({ setSidebarOpen }) => {\r\n  return (\r\n    <header className=\"bg-zinc-900 border-b border-zinc-800 p-4 flex justify-between items-center\">\r\n      <div className=\"flex items-center gap-2\">\r\n        <button className=\"md:hidden\" onClick={() => setSidebarOpen(true)}>\r\n          <Menu />\r\n        </button>\r\n        <h1 className=\"font-semibold\">Cyberlegal.AI Chat Assistant</h1>\r\n      </div>\r\n      <button\r\n        onClick={logout}\r\n        className=\"text-sm px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition\"\r\n      >\r\n        Logout\r\n      </button>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default ChatHeader;\r\n"],"names":[],"mappings":";;;;AAQA;AACA;AATA;;;;AAeA,MAAM,aAAkC,CAAC,EAAE,cAAc,EAAE;IACzD,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAO,WAAU;wBAAY,SAAS,IAAM,eAAe;kCAC1D,cAAA,8OAAC,kMAAA,CAAA,OAAI;;;;;;;;;;kCAEP,8OAAC;wBAAG,WAAU;kCAAgB;;;;;;;;;;;;0BAEhC,8OAAC;gBACC,SAAS,kHAAA,CAAA,SAAM;gBACf,WAAU;0BACX;;;;;;;;;;;;AAKP;uCAEe","debugId":null}},
    {"offset": {"line": 937, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/app/components/ChatBubble.tsx"],"sourcesContent":["// File: ChatBubble.tsx\r\nimport { FC } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\ninterface ChatBubbleProps {\r\n  sender: \"user\" | \"bot\";\r\n  content: string;\r\n}\r\n\r\nconst ChatBubble: FC<ChatBubbleProps> = ({ sender, content }) => {\r\n  const isUser = sender === \"user\";\r\n\r\n  return (\r\n    <div className={`flex w-full ${isUser ? \"justify-end\" : \"justify-start\"}`}>\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 8 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{\r\n          type: \"spring\",\r\n          stiffness: 500,\r\n          damping: 30,\r\n        }}\r\n        className={`max-w-[75%] px-4 py-2 rounded-lg text-sm leading-relaxed ${\r\n          isUser\r\n            ? \"bg-indigo-600 text-white rounded-br-none\"\r\n            : \"bg-zinc-800 text-zinc-100 rounded-bl-none\"\r\n        }`}\r\n      >\r\n        {content}\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBubble;\r\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;AAEvB;;;AAOA,MAAM,aAAkC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;IAC1D,MAAM,SAAS,WAAW;IAE1B,qBACE,8OAAC;QAAI,WAAW,CAAC,YAAY,EAAE,SAAS,gBAAgB,iBAAiB;kBACvE,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,YAAY;gBACV,MAAM;gBACN,WAAW;gBACX,SAAS;YACX;YACA,WAAW,CAAC,yDAAyD,EACnE,SACI,6CACA,6CACJ;sBAED;;;;;;;;;;;AAIT;uCAEe","debugId":null}},
    {"offset": {"line": 983, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/app/components/ChatMessageList.tsx"],"sourcesContent":["// File: src/app/components/ChatMessageList.tsx\r\n\r\nimport { FC } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport ChatBubble from \"./ChatBubble\";\r\nimport { ChatMessage } from \"@/types/ChatTypes\";\r\n\r\n// âœ… Correct props interface\r\ninterface ChatMessageListProps {\r\n  messages: ChatMessage[];\r\n  isTyping: boolean;\r\n}\r\n\r\nconst ChatMessageList: FC<ChatMessageListProps> = ({ messages, isTyping }) => {\r\n  return (\r\n    <AnimatePresence>\r\n      {messages.map((msg, i) => (\r\n        <motion.div\r\n          key={i}\r\n          initial={{ opacity: 0, y: 8 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          exit={{ opacity: 0 }}\r\n          transition={{ delay: i * 0.05 }}\r\n        >\r\n          <ChatBubble sender={msg.sender} content={msg.content} />\r\n        </motion.div>\r\n      ))}\r\n\r\n      {isTyping && (\r\n        <motion.div\r\n          key=\"typing\"\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: messages.length * 0.05 }}\r\n          className=\"flex justify-start\"\r\n        >\r\n          <div className=\"bg-zinc-800 text-white px-4 py-2 rounded-lg text-sm flex items-center space-x-1\">\r\n            <div className=\"text-sm text-zinc-500 animate-pulse\">\r\n              Cyberlegal.AI is typing\r\n            </div>\r\n            <span className=\"typing-dot w-2 h-2 bg-white rounded-full animate-bounce\" />\r\n            <span className=\"typing-dot w-2 h-2 bg-white rounded-full animate-bounce delay-150\" />\r\n            <span className=\"typing-dot w-2 h-2 bg-white rounded-full animate-bounce delay-300\" />\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n\r\nexport default ChatMessageList;\r\n"],"names":[],"mappings":"AAAA,+CAA+C;;;;;AAG/C;AAAA;AACA;;;;AASA,MAAM,kBAA4C,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACvE,qBACE,8OAAC,yLAAA,CAAA,kBAAe;;YACb,SAAS,GAAG,CAAC,CAAC,KAAK,kBAClB,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;oBAET,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAE;oBAC5B,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAE;oBAC5B,MAAM;wBAAE,SAAS;oBAAE;oBACnB,YAAY;wBAAE,OAAO,IAAI;oBAAK;8BAE9B,cAAA,8OAAC,uIAAA,CAAA,UAAU;wBAAC,QAAQ,IAAI,MAAM;wBAAE,SAAS,IAAI,OAAO;;;;;;mBAN/C;;;;;YAUR,0BACC,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;gBAET,SAAS;oBAAE,SAAS;gBAAE;gBACtB,SAAS;oBAAE,SAAS;gBAAE;gBACtB,YAAY;oBAAE,OAAO,SAAS,MAAM,GAAG;gBAAK;gBAC5C,WAAU;0BAEV,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCAAsC;;;;;;sCAGrD,8OAAC;4BAAK,WAAU;;;;;;sCAChB,8OAAC;4BAAK,WAAU;;;;;;sCAChB,8OAAC;4BAAK,WAAU;;;;;;;;;;;;eAZd;;;;;;;;;;;AAkBd;uCAEe","debugId":null}},
    {"offset": {"line": 1093, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/RYZEN%205%205500/Documents/GitHub/OUTSOURCE/CYBERLEGAL/cyber-legal-ai/src/app/chatbot/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nimport ChatSidebar from \"../components/ChatSidebar\";\r\nimport ChatEmptyState from \"../components/ChatEmptyState\";\r\nimport ChatInput from \"../components/ChatInput\";\r\nimport ChatHeader from \"../components/ChatHeader\";\r\nimport ChatMessageList from \"../components/ChatMessageList\";\r\n\r\nimport { ChatMessage, ChatSession } from \"@/types/ChatTypes\";\r\nimport {\r\n  saveChatSessions,\r\n  loadChatSessions,\r\n} from \"@/utils/chatStorage\";\r\n\r\nfunction generateSmartTitle(input: string): string {\r\n  const trimmed = input.trim().toLowerCase();\r\n\r\n  if (/hello|hi|good\\s(morning|afternoon|evening)/i.test(trimmed)) return \"Greetings\";\r\n  if (/cyber\\s?libel|defamation/i.test(trimmed)) return \"Cyber Libel Inquiry\";\r\n  if (/evidence|admissibility/i.test(trimmed)) return \"Evidence Law Question\";\r\n  if (/privacy|data\\sprotection/i.test(trimmed)) return \"Privacy Law Concern\";\r\n  if (/fraud|scam|identity|impersonation/i.test(trimmed)) return \"Cybercrime Concern\";\r\n  if (trimmed.length <= 6) return \"Quick Question\";\r\n  if (trimmed.length < 25) return trimmed.charAt(0).toUpperCase() + trimmed.slice(1);\r\n  return trimmed.slice(0, 30).charAt(0).toUpperCase() + trimmed.slice(1, 30) + \"...\";\r\n}\r\n\r\nexport default function ChatbotPage() {\r\n  const router = useRouter();\r\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [authChecked, setAuthChecked] = useState(false);\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const [sessions, setSessions] = useState<ChatSession[]>([]);\r\n  const [activeSessionId, setActiveSessionId] = useState<string | null>(null);\r\n\r\n  const chatRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const isLoggedIn =\r\n      sessionStorage.getItem(\"cyberlegal-auth\") || Cookies.get(\"cyberlegal-auth\");\r\n    if (!isLoggedIn) router.push(\"/login\");\r\n    else setAuthChecked(true);\r\n  }, [router]);\r\n\r\n  useEffect(() => {\r\n    if (chatRef.current) {\r\n      chatRef.current.scrollTop = chatRef.current.scrollHeight;\r\n    }\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    setSessions(loadChatSessions());\r\n  }, []);\r\n\r\n  const persistSession = (updatedMessages: ChatMessage[], title: string) => {\r\n    const newSession: ChatSession = {\r\n      id: activeSessionId || crypto.randomUUID(),\r\n      title,\r\n      createdAt: new Date().toISOString(),\r\n      messages: updatedMessages,\r\n    };\r\n\r\n    const filtered = sessions.filter((s) => s.id !== newSession.id);\r\n    const updated = [newSession, ...filtered];\r\n    saveChatSessions(updated);\r\n    setSessions(updated);\r\n    setActiveSessionId(newSession.id);\r\n  };\r\n\r\n  const handleSend = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!input.trim()) return;\r\n\r\n    const userMessage: ChatMessage = { sender: \"user\", content: input.trim() };\r\n    const updatedMessages = [...messages, userMessage];\r\n    setMessages(updatedMessages);\r\n    setInput(\"\");\r\n    setIsTyping(true);\r\n\r\n    try {\r\n      const res = await fetch(\"http://127.0.0.1:8000/api/rag/query\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ query: userMessage.content }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      const botReply: ChatMessage = {\r\n        sender: \"bot\",\r\n        content: data.response,\r\n      };\r\n      const fullChat = [...updatedMessages, botReply];\r\n\r\n      setMessages(fullChat);\r\n      persistSession(fullChat, generateSmartTitle(userMessage.content));\r\n    } catch (err) {\r\n      console.error(\"Backend error:\", err);\r\n    } finally {\r\n      setIsTyping(false);\r\n    }\r\n  };\r\n\r\n  const handleSelectSession = (session: ChatSession) => {\r\n    setActiveSessionId(session.id);\r\n    setMessages(session.messages);\r\n  };\r\n\r\n  const sendPreset = (text: string) => setInput(text);\r\n\r\n  if (!authChecked) return null;\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden bg-zinc-900 text-white\">\r\n      <ChatSidebar\r\n        sidebarOpen={sidebarOpen}\r\n        setSidebarOpen={setSidebarOpen}\r\n        onSelectSession={handleSelectSession}\r\n        sessions={sessions}\r\n        activeId={activeSessionId}\r\n        setSessions={setSessions}\r\n      />\r\n      <main className=\"flex flex-col flex-1\">\r\n        <ChatHeader setSidebarOpen={setSidebarOpen} />\r\n        <div ref={chatRef} className=\"flex-1 overflow-y-auto px-6 py-4\">\r\n          <div className=\"max-w-3xl mx-auto space-y-4\">\r\n            {messages.length === 0 && !isTyping ? (\r\n              <ChatEmptyState\r\n                onPresetClick={sendPreset}\r\n                input={input}\r\n                onInputChange={(e) => setInput(e.target.value)}\r\n                onSend={handleSend}\r\n              />\r\n            ) : (\r\n              <ChatMessageList messages={messages} isTyping={isTyping} />\r\n            )}\r\n          </div>\r\n        </div>\r\n        {messages.length > 0 && (\r\n          <ChatInput\r\n            input={input}\r\n            onInputChange={(e) => setInput(e.target.value)}\r\n            onSend={handleSend}\r\n          />\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}